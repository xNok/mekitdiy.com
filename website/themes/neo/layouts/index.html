{{ define "main" }}
<section class="py-12 bg-nb-light-bg">
  <div class="container mx-auto px-6">
    <!-- Hero Section with Neo Panel -->
    <div class="hero-panel bg-nb-light-bg border-4 border-nb-light-border p-8 md:p-12 mb-16 relative">
      <h1 class="text-5xl md:text-6xl font-bold text-nb-light-text text-center mb-4">Welcome to MekitDiY!</h1>
      <p class="text-2xl text-nb-light-text text-center mb-8">Your source for awesome DIY projects.</p>
      
      {{ if .Site.Params.banner.enable }}
      <div class="bg-nb-pop-yellow text-center py-6 px-8 border-4 border-nb-light-border shadow-neo-lg rotate-neo-1 mt-8">
        <p class="text-nb-light-text font-bold text-lg">{{ .Site.Params.banner.message }}</p>
      </div>
      {{ end }}
    </div>

    <!-- Featured Projects Section -->
    <div class="mb-20">
      <div class="bg-nb-pop-pink border-4 border-nb-light-border p-4 inline-block shadow-neo mb-6 rotate-neo-2">
        <h2 class="text-4xl font-bold text-text-on-pop-bright">Featured Projects</h2>
      </div>
      
      <div class="grid md:grid-cols-2 gap-8 mb-12">
        {{ range first 2 (where .Site.RegularPages "Type" "projects") }}
          <div class="bg-nb-light-bg border-4 border-nb-light-border p-8 shadow-neo-lg hover:shadow-neo-xl transition-all hover:-translate-y-1">
            <div class="bg-nb-pop-blue border-3 border-nb-light-border p-3 inline-block mb-4 shadow-neo">
              <h3 class="text-2xl font-bold text-text-on-pop-bright">{{ .Title }}</h3>
            </div>
            <p class="text-nb-light-text mb-6 text-lg">{{ .Summary | truncate 150 }}</p>
            <a href="{{ .RelPermalink }}" class="inline-block bg-nb-pop-pink text-text-on-pop-bright font-bold py-3 px-6 border-4 border-nb-light-border shadow-neo hover:shadow-neo-lg hover:bg-nb-pop-yellow hover:text-text-on-pop-dark transition-all">
              Learn More →
            </a>
          </div>
        {{ end }}
      </div>
      
      {{ if gt (len (where .Site.RegularPages "Type" "projects")) 2 }}
        <div class="text-center">
          <a href="{{ "projects/" | relURL }}" class="inline-block bg-nb-pop-blue text-text-on-pop-bright font-bold py-4 px-8 text-xl border-4 border-nb-light-border shadow-neo-lg hover:shadow-neo-xl hover:bg-nb-pop-cyan transition-all">
            View All Projects →
          </a>
        </div>
      {{ end }}
    </div>

    <!-- Latest Blog Posts Section -->
    {{ $blogPosts := where .Site.RegularPages "Type" "blog" }}
    {{ if $blogPosts }}
    <div class="mb-20 bg-nb-pop-yellow border-4 border-nb-light-border p-8 md:p-12 shadow-neo-xl">
      <div class="bg-nb-light-bg border-4 border-nb-light-border p-4 inline-block shadow-neo mb-8 rotate-neo-1">
        <h2 class="text-4xl font-bold text-nb-light-text">Latest Articles</h2>
      </div>
      
      <div class="grid md:grid-cols-3 gap-6 mb-8">
        {{ range first 3 ($blogPosts.ByDate.Reverse) }}
          <div class="bg-nb-light-bg border-4 border-nb-light-border p-6 shadow-neo hover:shadow-neo-lg transition-all hover:-translate-y-1">
            <div class="bg-nb-pop-cyan border-2 border-nb-light-border p-2 inline-block mb-3">
              <h3 class="text-xl font-bold text-text-on-pop-bright">
                <a href="{{ .RelPermalink }}" class="hover:text-nb-pop-yellow">{{ .Title }}</a>
              </h3>
            </div>
            <div class="bg-nb-pop-pink text-text-on-pop-bright font-bold text-sm px-3 py-1 inline-block mb-3">
              {{ .Date.Format "January 2, 2006" }}
            </div>
            <p class="text-nb-light-text mb-4 text-base">{{ .Summary | truncate 100 }}</p>
            <a href="{{ .RelPermalink }}" class="inline-block bg-nb-pop-pink text-text-on-pop-bright font-bold py-2 px-4 border-2 border-nb-light-border shadow-neo hover:shadow-neo-lg hover:bg-nb-pop-blue transition-all">
              Read More →
            </a>
          </div>
        {{ end }}
      </div>
      
      <div class="text-center">
        <a href="{{ "blog/" | relURL }}" class="inline-block bg-nb-light-bg text-nb-light-text font-bold py-4 px-8 text-xl border-4 border-nb-light-border shadow-neo-lg hover:shadow-neo-xl hover:bg-nb-pop-pink hover:text-text-on-pop-bright transition-all">
          View All Articles →
        </a>
      </div>
    </div>
    {{ end }}

    <!-- Gallery Section (Mosaic Layout) -->
    {{ $allPages := union (where .Site.RegularPages "Type" "projects") (where .Site.RegularPages "Type" "blog") }}
    {{ if $allPages }}
    <div class="mb-12">
      <div class="bg-nb-pop-cyan border-4 border-nb-light-border p-4 inline-block shadow-neo mb-6 rotate-neo-2">
        <h2 class="text-4xl font-bold text-text-on-pop-bright">Project Gallery</h2>
      </div>
      
      <div class="grid grid-cols-2 md:grid-cols-4 gap-6 mb-12">
        {{ range first 8 ($allPages.ByDate.Reverse) }}
          <a href="{{ .RelPermalink }}" class="group relative overflow-hidden border-4 border-nb-light-border shadow-neo-lg hover:shadow-neo-xl transition-all hover:-translate-y-2 bg-gradient-to-br {{ if eq (mod (add 1 .Date.Unix) 4) 0 }}from-nb-pop-pink to-nb-pop-yellow{{ else if eq (mod (add 1 .Date.Unix) 4) 1 }}from-nb-pop-blue to-nb-pop-cyan{{ else if eq (mod (add 1 .Date.Unix) 4) 2 }}from-nb-pop-yellow to-nb-pop-pink{{ else }}from-nb-pop-cyan to-nb-pop-blue{{ end }} aspect-square {{ if eq (mod (add 1 .Date.Unix) 3) 0 }}md:col-span-2 md:row-span-2{{ end }}">
            <div class="absolute inset-0 bg-nb-light-bg bg-opacity-0 group-hover:bg-opacity-95 transition-all flex items-center justify-center p-4 border-4 border-transparent group-hover:border-nb-light-border">
              <div class="opacity-0 group-hover:opacity-100 transition-opacity text-center">
                <div class="bg-nb-pop-pink border-2 border-nb-light-border p-3 inline-block mb-2">
                  <h4 class="text-lg font-bold text-text-on-pop-bright">{{ .Title }}</h4>
                </div>
                <div class="bg-nb-pop-yellow text-text-on-pop-dark font-bold text-sm px-3 py-1 inline-block">
                  {{ if eq .Type "projects" }}Project{{ else }}Article{{ end }}
                </div>
              </div>
            </div>
          </a>
        {{ end }}
      </div>
      
      <div class="text-center flex flex-wrap gap-4 justify-center">
        <a href="{{ "projects/" | relURL }}" class="inline-block bg-nb-pop-blue text-text-on-pop-bright font-bold py-4 px-8 text-xl border-4 border-nb-light-border shadow-neo-lg hover:shadow-neo-xl hover:bg-nb-pop-pink transition-all">
          More Projects →
        </a>
        <a href="{{ "blog/" | relURL }}" class="inline-block bg-nb-pop-pink text-text-on-pop-bright font-bold py-4 px-8 text-xl border-4 border-nb-light-border shadow-neo-lg hover:shadow-neo-xl hover:bg-nb-pop-yellow hover:text-text-on-pop-dark transition-all">
          More Articles →
        </a>
      </div>
    </div>
    {{ end }}
  </div>
</section>
{{ end }}